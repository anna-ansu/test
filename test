$s = array_filter(
$data['i'] ?? [],
fn(array $identity) => $identity['ip'] === 'IC',
);

$s1 = array_shift($s)
$s1 = preg_replace('/\D/', '', $s1[n'])


try {
  $response = $this->handle(...);

  if(empty($response)) {
    return null;
  }

  $c - достаем клиента из внешней базы по $message->getId()
  if(null === $c) {
    $c = new Client ($message->getId());
  }

$c->set...
пречисляем параметры

return $person;

} catch (Throwable $e){
  $this->logger->error($e->getMassage())
  return null;
}



$message = new NameMessage('...');
$handler = static::getContainer()->get(NameHandler::class);
$data = $handler->__invoke($message);


static::getContainer()->get('mock_client')_>setResponceFactory(new MockResponse ( вдругих примерах тут xml))


  $a = $c->getA()->findFirst(
      fn(int $index, Account $a) => $a->getId() === $raw['id']
  );
